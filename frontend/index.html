<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>PharmaGuard Dashboard</title>

  <!-- CSS -->
  <link rel="stylesheet" href="assets/css/style.css" />

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>

<!-- ================= LOGIN SECTION ================= -->
<div id="loginSection" class="login-page">
  <div class="login-box">
    <h2>üîê PharmaGuard Login</h2>

    <input type="email" id="email" placeholder="Email" />
    <input type="password" id="password" placeholder="Password" />

    <button onclick="login()">Login</button>

    <p class="login-note">Demo Access Credentials</p>
    <div class="demo-creds">
      <p><strong>Email:</strong> demo@pharmaguard.ai</p>
      <p><strong>Password:</strong> pharmaguard123</p>
    </div>
  </div>
</div>

<!-- ================= DASHBOARD SECTION ================= -->
<div id="dashboardSection" style="display:none;">

  <!-- NAVBAR -->
  <nav class="navbar">
    <div class="nav-left">üß¨ <span>PharmaGuard</span></div>
    <div class="nav-right">
      Precision Medicine Dashboard
      <button class="logout-btn" onclick="logout()">Logout</button>
    </div>
  </nav>

  <!-- MAIN DASHBOARD -->
  <div class="dashboard">

    <!-- ================= TOP INFO CARDS (UPDATED) ================= -->
    <div class="info-cards">

      <div class="info-card drug-card">
        <h4>Drug Selected</h4>
        <p><span id="drugInfo">‚Äî</span></p>
      </div>

      <div class="info-card gene-card">
        <h4>Primary Gene</h4>
        <p><span id="geneInfo">‚Äî</span></p>
      </div>

      <div class="info-card risk-card" id="riskCard">
        <h4>Risk Level</h4>
        <p><span id="riskInfo">‚Äî</span></p>
      </div>

      <div class="info-card confidence-card">
        <h4>Risk Percentage</h4>
        <p><span id="confidenceInfo">‚Äî</span></p>
      </div>

    </div>
    <!-- ============================================================= -->

    <!-- ANALYSIS PANEL -->
    <div class="panel">
      <h2>Genetic Drug Risk Analysis</h2>

      <div class="form-grid">
        <div>
          <label>Upload VCF File</label>
          <input type="file" id="vcfFile" />
        </div>

        <div>
          <label>Select Drug</label>
          <select id="drug">
            <option value="CODEINE">CODEINE (CYP2D6)</option>
            <option value="WARFARIN">WARFARIN (CYP2C9)</option>
            <option value="CLOPIDOGREL">CLOPIDOGREL (CYP2C19)</option>
            <option value="SIMVASTATIN">SIMVASTATIN (SLCO1B1)</option>
            <option value="AZATHIOPRINE">AZATHIOPRINE (TPMT)</option>
            <option value="FLUOROURACIL">FLUOROURACIL (DPYD)</option>
          </select>
        </div>

        <div>
          <label>Language</label>
          <select id="language">
            <option value="en">English</option>
            <option value="hi">Hindi</option>
            <option value="kn">Kannada</option>
            <option value="ta">Tamil</option>
            <option value="te">Telugu</option>
          </select>
        </div>
      </div>

      <button onclick="analyze()">Run Analysis</button>
    </div>

    <!-- RESULT PANEL -->
    <div class="panel hidden" id="resultPanel">

      <h2>Risk Assessment</h2>

      <div id="riskBox" class="risk-box">
        <span id="riskLabel"></span>
        <span id="riskPercent"></span>
      </div>
         
      <!-- ALTERNATIVE DRUGS -->
      <div class="panel-section" id="altDrugSection" style="display:none;">
        <h3>Alternative Drug Recommendations</h3>
        <table class="alt-drug-table">
          <thead>
            <tr>
              <th>Drug</th>
              <th>Risk Level</th>
              <th>Recommendation</th>
            </tr>
          </thead>
          <tbody id="altDrugTableBody"></tbody>
        </table>
        <p class="disclaimer">‚ö† Decision-support only. Consult clinician.</p>
      </div>

      <!-- RISK CHARTS -->
        <div class="panel-section">
  <h3>Risk Visualization</h3>

  <div class="chart-container">
    <div class="chart-box bar">
      <canvas id="riskBarChart"></canvas>
    </div>

    <div class="chart-box pie">
      <canvas id="riskPieChart"></canvas>
    </div>
  </div>
</div>


      <!-- GENES -->
      <div class="panel-section">
        <h3>Detected Pharmacogenomic Genes</h3>
        <ul id="geneList" class="gene-list">
          <li id="gene-CYP2D6">CYP2D6</li>
          <li id="gene-CYP2C19">CYP2C19</li>
          <li id="gene-CYP2C9">CYP2C9</li>
          <li id="gene-SLCO1B1">SLCO1B1</li>
          <li id="gene-TPMT">TPMT</li>
          <li id="gene-DPYD">DPYD</li>
        </ul>
      </div>

      <!-- EXPLANATION -->
      <div class="panel-section">
        <h3>Explainable AI Summary</h3>
        <p id="explanation"></p>
      </div>

      <!-- TRACE -->
      <div class="panel-section">
        <h3>Decision Trace</h3>
        <ul id="trace"></ul>
      </div>

      <!-- JSON -->
      <div class="panel-section">
        <h3>Structured JSON Output</h3>
        <pre id="jsonOutput"></pre>
      </div>

      <!-- CHATBOT -->
      <div class="panel-section">
        <h3>24/7 AI Help Assistant</h3>
        <div class="chatbot-box">
          <div id="chatHistory"></div>
          <input type="text" id="chatMessage" placeholder="Ask..." />
          <button onclick="sendChat()">Send</button>
        </div>
      </div>

    </div>
  </div>
</div>

<!-- ================= SCRIPTS ================= -->
<script src="assets/js/auth.js"></script>
<script src="assets/js/chatbot.js"></script>
<script src="assets/js/analyze.js"></script>
<script src="assets/js/visualization.js"></script>

</body>
</html>
